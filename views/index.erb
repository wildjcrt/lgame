<!DOCTYPE html>
<html>
  <head>
    <title>L Game</title>
    <meta charset="utf-8">
    <script src="js/jquery-1.10.2.min.js"></script>
    <script src="js/jquery-ui-1.10.3.custom.min.js"></script>
    <script src="js/togetherjs-min.js"></script>
    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body>
    <div id="container">
      <table class="table">
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
      </table>

      <div id="l1" data-rotate=0 data-flipover=0>
        <span class="rotate">R</span>
        <span class="flipover">T</span>
      </div>
      <div id="l2" data-rotate=180 data-flipover=0>
        <span class="rotate">R</span>
        <span class="flipover">T</span>
      </div>
      <div id="o1"></div>
      <div id="o2"></div>
    </div>
    <button id="start-togetherjs">找朋友開始遊戲</button>
    <script type="text/javascript" charset="utf-8">
      $(function () {
        $("#start-togetherjs").click(TogetherJS);
        $("#l1").draggable();
        $("#l2").draggable();
        $("#o1").draggable();
        $("#o2").draggable();

        var rotate, flipover, target;
        $(".rotate").click(function(){
          target   = $(this).parent("div");
          flipover = target.data("flipover");
          rotate   = target.data("rotate") + 90;
          if (rotate === 360) {
            rotate = 0;
          }
          target.data("rotate", rotate);

          target.css({
            "-webkit-transform": "rotateZ(" + rotate + "deg)" + "rotateY(" + flipover + "deg)",
               "-moz-transform": "rotateZ(" + rotate + "deg)" + "rotateY(" + flipover + "deg)",
                "-ms-transform": "rotateZ(" + rotate + "deg)" + "rotateY(" + flipover + "deg)",
                 "-o-transform": "rotateZ(" + rotate + "deg)" + "rotateY(" + flipover + "deg)",
                    "transform": "rotateZ(" + rotate + "deg)" + "rotateY(" + flipover + "deg)"
          });
        });

        $(".flipover").click(function(){
          target = $(this).parent("div");
          rotate   = target.data("rotate");
          flipover = target.data("flipover") + 180;
          if (flipover === 360) {
            flipover = 0;
          }
          target.data("flipover", flipover);

          target.css({
            "-webkit-transform": "rotateZ(" + rotate + "deg)" + "rotateY(" + flipover + "deg)",
               "-moz-transform": "rotateZ(" + rotate + "deg)" + "rotateY(" + flipover + "deg)",
                "-ms-transform": "rotateZ(" + rotate + "deg)" + "rotateY(" + flipover + "deg)",
                 "-o-transform": "rotateZ(" + rotate + "deg)" + "rotateY(" + flipover + "deg)",
                    "transform": "rotateZ(" + rotate + "deg)" + "rotateY(" + flipover + "deg)"
          });
        });
      });
    </script>
  </body>
</html>
